/* ======= Reset mínimo ======= */
* { box-sizing: border-box; }
html, body, #root { width:100%; height:100%; margin:0; padding:0; overflow-x:hidden; }

/* ======= Layout / Topbar ======= */
.wbp-page { display:flex; flex-direction:column; height:100vh; width:100%; max-width:100vw; background:#fff; }

.wbp-topbar{
  position:sticky; top:0; z-index:20;
  padding:10px 12px; margin:10px 12px 0;
  background:#fff; color:#111827; display:flex; align-items:center; gap:12px;
  border-bottom:1px solid #e5e7eb; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.04);
  /* fixes para que no se “corten” controles */
  flex-wrap: wrap !important;
  overflow: visible !important;
}
.wbp-brand{ display:flex; gap:8px; align-items:center; }
.wbp-brand-name{ font-weight:800; color:#111827; }
.wbp-brand-dot{ opacity:.65; }
.wbp-title{ font-weight:700; color:#0f172a; }

.wbp-tools{ display:flex; gap:6px; margin-left:12px; min-width:0; }
.wbp-palette{ display:flex; align-items:center; gap:8px; margin-left:18px; }
.wbp-weight{ display:flex; align-items:center; gap:8px; margin-left:18px; }
.wbp-grid-ctrls{ display:flex; align-items:center; gap:8px; margin-left:18px; min-width:0; }

.wbp-right{
  margin-left:auto;
  display:flex; gap:8px; align-items:center;
  flex: 0 0 auto !important;             /* no colapsa */
  min-width: max-content !important;     /* ocupa lo que necesita */
  order: 99;                              /* por si algo reordena */
}

.wbp-label{ color:#374151; opacity:.95; font-size:13px; }

/* ======= Botones / Controles ======= */
.wbp-btn{
  display:inline-flex; align-items:center; justify-content:center; user-select:none;
  padding:8px 10px; min-width:34px; min-height:34px; background:#fff; color:#111827;
  border:1px solid #d1d5db; border-radius:10px; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,.04);
  transition:background .15s, transform .05s, border-color .15s;
  flex: 0 0 auto !important;             /* nunca se encoge a 0 */
}
.wbp-btn:hover{ background:#fafafa; border-color:#c7cdd6; }
.wbp-btn:active{ transform:translateY(1px); }
.wbp-btn.is-active{ outline:2px solid #2563eb; outline-offset:1px; }

.wbp-swatch{
  width:18px; height:18px; border-radius:999px; border:1px solid #d1d5db;
  box-shadow:0 1px 4px rgba(0,0,0,.12); cursor:pointer;
}
.wbp-swatch.is-active{ border:2px solid #111; }

.wbp-slider{ accent-color:#2563eb; }
.wbp-chip{ font-size:12px; color:#6b7280; min-width:36px; text-align:center; }
.wbp-num{ width:72px; padding:6px 8px; border:1px solid #d1d5db; border-radius:8px; outline:none; background:#fff; }

/* compactar un poco para dejar sitio a la derecha */
.wbp-weight input[type="range"]{ max-width: 160px; }
.wbp-palette input[type="color"]{ width: 44px; height: 28px; padding:0; }

/* ======= Stage / Canvas ======= */
.wbp-stage{ flex:1; padding:12px; display:flex; overflow:hidden; min-width:0; }
.wbp-wrap{
  position:relative; flex:1; border-radius:12px; overflow:clip;
  border:1px solid #e5e7eb; background:#fff; box-shadow:inset 0 0 0 1px #f3f4f6;
}

.wbp-grid{
  position:absolute; inset:0; pointer-events:none;
  background:
    linear-gradient(to right, rgba(17,24,39,.06) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(17,24,39,.06) 1px, transparent 1px);
  background-size: 24px 24px;  /* se sobreescribe por inline-style */
  z-index:0;
}

.wbp-canvas{
  position:absolute; inset:0; display:block; width:100%; height:100%;
  background:#fff; touch-action:none; cursor:crosshair; pointer-events:auto; z-index:1;
}
.wbp-ovr-canvas{
  position:absolute; inset:0; display:block; width:100%; height:100%;
  background:transparent; pointer-events:none; z-index:2;
}

/* ======= Overlays (texto e imagen) ======= */
.wbp-overlay{ position:absolute; inset:0; overflow:clip; pointer-events:none; z-index:3; }

/* Texto */
.wbp-textbox{
  position:absolute; background:transparent; border:1px dashed rgba(2,6,23,.15);
  border-radius:6px; display:flex; align-items:stretch; justify-content:stretch;
  pointer-events:auto;
}
.wbp-textbox.is-active{ border-color:#2563eb; }
.wbp-textarea{
  flex:1; padding:6px 8px; outline:none; white-space:pre-wrap; overflow:auto;
  font: 16px/1.3 Inter, system-ui, Arial, sans-serif; color:#111827; background:transparent;
}
.wbp-resizer{
  position:absolute; right:0; bottom:0; width:18px; height:18px; border-top:1px solid rgba(2,6,23,.15);
  border-left:1px solid rgba(2,6,23,.15); background:#fff; color:#6b7280; font-size:12px;
  display:flex; align-items:center; justify-content:center; border-bottom-right-radius:6px; cursor:nwse-resize; user-select:none;
}

/* Imagen */
.wbp-imgbox{
  position:absolute; background:transparent; border:1px dashed rgba(2,6,23,.15);
  border-radius:6px; display:flex; align-items:stretch; justify-content:stretch; pointer-events:auto;
}
.wbp-imgbox.is-active{ border-color:#2563eb; }
.wbp-img{ width:100%; height:100%; object-fit:contain; user-select:none; pointer-events:none; }
.wbp-img-resizer{
  position:absolute; right:0; bottom:0; width:18px; height:18px; border-top:1px solid rgba(2,6,23,.15);
  border-left:1px solid rgba(2,6,23,.15); background:#fff; color:#6b7280; font-size:12px;
  display:flex; align-items:center; justify-content:center; border-bottom-right-radius:6px; cursor:nwse-resize; user-select:none;
}

/* Pan cursor (si haces Alt/rueda) */
.wbp-canvas.is-panning { cursor: grab; }
.wbp-canvas.is-panning:active { cursor: grabbing; }

/* Edge-to-edge opcional */
.wbp-page.wbp--edge { width:100vw; max-width:100vw; margin:0; }
.wbp--edge .wbp-topbar { margin:0; border-radius:0; }
.wbp--edge .wbp-stage  { padding:0; }
.wbp--edge .wbp-wrap   { border-radius:0; }

/* Responsive suave */
@media (max-width: 860px){
  .wbp-topbar{ flex-wrap:wrap; gap:10px; }
  .wbp-right{ width:100%; justify-content:flex-end; }
}
/* SimBox */
.wbp-simbox{
  position:absolute; background:#fff; border:1px dashed rgba(2,6,23,.15);
  border-radius:6px; display:flex; align-items:stretch; justify-content:stretch;
}
.wbp-simbox.is-active{ border-color:#2563eb; }
.wbp-sim-iframe{ width:100%; height:100%; border:0; border-radius:6px; background:#fff; }
.wbp-sim-resizer{
  position:absolute; right:0; bottom:0; width:18px; height:18px;
  border-top:1px solid rgba(2,6,23,.15); border-left:1px solid rgba(2,6,23,.15);
  background:#fff; color:#6b7280; font-size:12px; display:flex; align-items:center; justify-content:center;
  border-bottom-right-radius:6px; cursor:nwse-resize; user-select:none;
}

/* Modal simple */
.wbp-modal{
  position:fixed; inset:0; background:rgba(0,0,0,.25); display:flex; align-items:center; justify-content:center; z-index:50;
}
.wbp-modal__panel{
  width:min(720px, 92vw); max-height:80vh; overflow:auto; background:#fff; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,.25);
}
.wbp-modal__head{
  display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid #e5e7eb;
}
.wbp-modal__body{ padding:10px 14px; }
.wbp-simrow{ display:flex; align-items:center; justify-content:space-between; padding:6px 0; border-bottom:1px dashed #eee; }
.wbp-simrow__name{ font-weight:600; color:#111827; }